# Поиск для локальной сети предприятия (Версия 4)

Проект представляет собой поисковый сервер, построенный на технологиях Docker, Flask, Mongodb и Python. Он индексирует каталог в локальной сети предприятия и использует поисковый индекс для ответов пользователям. Результаты поиска ранжируются согласно релевантности поисковому запросу. Поиск осуществляется по путям к файлам.

Сервер работает подобно поисковым серверам в сети Интернет (например, Google и Яндекс), возвращая список путей к файлам, удовлетворяющих поисковому запросу. Образец использования показан в видео.

[![Обзор использования](https://img.youtube.com/vi/VwrZZQH83QTY/1.jpg)](https://www.youtube.com/watch?v=wrZZQH83QTY)


Для установки проекта необходимо скачать репозиторий, собрать образ и запустить контейнер. База с поисковым индексом находится вне контейнера в каталоге, указываемым администратором.

# Инструкция по установке (для администратора)

1. Скачайте репозиторий (на компьютере с доступом в сеть Интернет и установленным [git](https://git-scm.com/book/ru/v2/Введение-Установка-Git)):
```
git clone https://github.com/prog815/LS4.git
```

2. Соберите образ (на компьютере с доступом в сеть Интернет и установленным [Docker](https://docs.docker.com/get-docker/)):

```
docker build --pull --rm -f "Dockerfile" -t ls4:latest .
```

3. Перенесите собранный образ на сервер в локальной сети предприятия (на сервере должен быть установлен [Docker](https://docs.docker.com/get-docker/)).

Для этого сохраните собранный образ в файл при помощи команды:
```
docker save -o ls4.tar ls4:latest
```
Файл ls4.tar любым доступным средством скопируйте на сервер в локальной сети.

Загрузите на сервере в локальной сети в Docker скопированный образ при помощи команды:
```
docker load -i ls4.tar
``` 

4. Запустите контейнер:

```
docker run -d -p80:5000 -e SOURCE=C:\Users -v "$(PWD)/data:/data/db:rw" --mount type=bind,source=C:\Users,target=/app/static/files,readonly --name ls4 ls4
```
Замените в команде: 
- "$(PWD)/data" на каталог, где будет находится база;
- "C:\Users" на каталог, где находятся файлы для индексирования.

5. Находясь в локальной сети откройте браузер и перейдите на страницу http://<адрес сервера>. Вы можете использовать поисковый запрос для поиска файлов в каталоге предприятия.

6. Если выйдет обновление, необходимо будет перенести новый образ на сервер в локальной сети (шаги 1-3), остановить и удалить существующий контейнер командой:
```
docker rm -f ls4
```
и запустить контейнер (шаг 4).